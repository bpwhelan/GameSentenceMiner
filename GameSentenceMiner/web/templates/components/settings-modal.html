<!-- Settings Modal Component -->
<div id="settingsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Statistics Settings</h3>
            <span class="close-btn" id="closeSettingsModal">&times;</span>
        </div>
        <div class="modal-body">
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                Configure how reading time and sessions are calculated for your statistics.
            </p>
            <form id="settingsForm">
                <div style="margin-bottom: 20px;">
                    <label for="afkTimer"
                        style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                        AFK Timer (seconds)
                    </label>
                    <input type="number" id="afkTimer" name="afk_timer_seconds"
                        style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;"
                        placeholder="120">
                    <small
                        style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                        Maximum time between activities that still counts as active reading
                    </small>
                </div>

                <div style="margin-bottom: 20px;">
                    <label for="sessionGap"
                        style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                        Session Gap (seconds)
                    </label>
                    <input type="number" id="sessionGap" name="session_gap_seconds"
                        style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;"
                        placeholder="3600">
                    <small
                        style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                        Time gap that triggers a new reading session
                    </small>
                </div>

                <div style="margin-bottom: 20px;">
                    <label for="heatmapYear"
                        style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                        Heatmap Display Year
                    </label>
                    <select id="heatmapYear" name="heatmap_year"
                        style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;">
                        <option value="all">All Years</option>
                    </select>
                    <small
                        style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                        Select which year to display in the reading activity heatmap
                    </small>
                </div>

                <div style="margin-bottom: 20px;">
                    <label for="streakRequirement"
                        style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                        Streak Requirement (hours)
                    </label>
                    <input type="number" id="streakRequirement" name="streak_requirement_hours" min="0.01"
                        max="24" step="0.01"
                        style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;"
                        placeholder="1.0">
                    <small
                        style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                        Minimum hours of reading activity required to maintain streak (0.01-24 hours)
                    </small>
                </div>

                <!-- Reading Goals Section -->
                <div style="margin-bottom: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                    <label
                        style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                        Reading Goals Configuration
                    </label>
                    <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 14px;">
                        Set your long-term reading targets for tracking progress and projections.
                    </p>

                    <div style="margin-bottom: 15px;">
                        <label for="readingHoursTarget"
                            style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                            Reading Hours Target
                        </label>
                        <input type="number" id="readingHoursTarget" name="reading_hours_target" min="1"
                            max="10000"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;"
                            placeholder="1500">
                        <small
                            style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                            Total reading hours goal (1-10,000 hours) - Default: 1500 hours based on TMW N1
                            achievement
                        </small>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label for="characterCountTarget"
                            style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                            Character Count Target
                        </label>
                        <input type="number" id="characterCountTarget" name="character_count_target" min="1000"
                            max="1000000000"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;"
                            placeholder="25000000">
                        <small
                            style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                            Total characters read goal (1,000-1,000,000,000) - Default: 25 million characters
                        </small>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label for="gamesTarget"
                            style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                            Games/Visual Novels Target
                        </label>
                        <input type="number" id="gamesTarget" name="games_target" min="1" max="1000"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;"
                            placeholder="100">
                        <small
                            style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                            Number of games/visual novels to complete (1-1,000) - Default: 100 based on Refold
                            standards
                        </small>
                    </div>
                </div>

                <!-- Import ExStatic Lines Section -->
                <div style="margin-bottom: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                    <label
                        style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                        Import ExStatic Lines
                    </label>
                    <div style="margin-bottom: 10px;">
                        <input type="file" id="exstaticFile" accept=".csv"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-tertiary); color: var(--text-primary); font-size: 14px; box-sizing: border-box;">
                        <small
                            style="color: var(--text-tertiary); font-size: 12px; margin-top: 4px; display: block;">
                            Select an ExStatic CSV file to import reading data into GSM
                        </small>
                    </div>
                    <button type="button" id="importExstaticBtn"
                        style="width: 100%; padding: 10px; background: #666; color: white; border: none; border-radius: 5px; font-size: 14px; cursor: not-allowed; margin-bottom: 10px; box-sizing: border-box;"
                        disabled>
                        Import ExStatic Lines
                    </button>
                    <div id="importProgress" style="display: none; margin-bottom: 10px;">
                        <div
                            style="background: var(--bg-tertiary); border-radius: 5px; overflow: hidden; height: 20px; position: relative;">
                            <div id="importProgressBar"
                                style="background: var(--primary-color); height: 100%; width: 0%; transition: width 0.3s ease;">
                            </div>
                            <span id="importProgressText"
                                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 12px; color: var(--text-primary);">0%</span>
                        </div>
                    </div>
                    <div id="importStatus"
                        style="display: none; padding: 10px; border-radius: 5px; font-size: 14px;"></div>
                </div>
            </form>

            <div id="settingsError"
                style="display: none; background: var(--danger-color); color: white; padding: 10px; border-radius: 5px; margin-bottom: 15px; font-size: 14px;">
            </div>
            <div id="settingsSuccess"
                style="display: none; background: var(--success-color); color: white; padding: 10px; border-radius: 5px; margin-bottom: 15px; font-size: 14px;">
            </div>
        </div>
        <div class="modal-footer">
            <button id="cancelSettingsBtn" class="cancel-btn">Cancel</button>
            <button id="saveSettingsBtn" class="confirm-delete-btn">Save Settings</button>
        </div>
    </div>
</div>