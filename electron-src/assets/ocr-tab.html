<div id="ocr-tab-container" class="tab-container">
    <div id="ocr-grid-container" class="grid-container">
        <div id='config-card' class="card">
            <h2 id="config-header" class="collapsible-header">1. Select Source <span class="arrow-icon">‚ñ≤</span>
            </h2>
            <div id="config-collapsible-content" class="collapsible-content" style="display: block;">
                <div class="form-group" style="justify-content: center; align-items: center;">
                    <div id="scene-select-group" class="input-group">
                        <label for="sceneSelect" class="tooltip-indicator">Game (OBS Scene):
                            <span class="tooltiptext tooltiptext-right">Select the OBS Scene to Capture for OCR.
                                You can make a new Scene in the "Home" Tab</span>
                        </label>
                        <select id="sceneSelect"></select>
                        <button id="refreshScenesBtn" class="secondary">‚Üª</button>
                    </div>
                    <div id="screen-selector-group" class="input-group" style="justify-content: center;">
                        <button id="run-screen-selector">Run Area(s) Selector</button>
                        <button id="import-config-btn" class="secondary" title="Import OCR Config">üìã</button>
                        <button id="export-config-btn" class="secondary" title="Export OCR Config">üì§</button>
                        <button id="open-ocr-wiki-btn" class="secondary" title="Open OCR Area Selector Wiki">
                            <span style="font-size: 14px;">‚ùì</span>
                        </button>
                    </div>
                </div>
            </div>
    </div>
    </div>

    <div class="card" id="ocr-settings-card">
        <h2 id="settings-header" class="collapsible-header">
            <span>2. OCR Settings</span>
            <span style="margin-left: auto; display: flex; align-items: center; gap: 8px;">
                <label for="settings-mode-toggle" style="font-size: 14px; font-weight: normal; cursor: pointer;">
                    <input type="checkbox" id="settings-mode-toggle" style="margin-right: 4px;">
                    Advanced Mode
                </label>
            </span>
        </h2>
        <div id="ocr-settings-collapsible-content" class="collapsible-content" style="display: block;">
            <!-- Basic Mode Settings -->
            <div id="ocr-basic-settings" style="display: none;">
                <div class="grid-container">
                    <div class="form-group">
                        <div id="text-appearance-speed-group" class="input-group">
                            <label for="text-appearance-speed" class="tooltip-indicator">
                                Text Appearance Speed:
                                <span class="tooltiptext tooltiptext-right">
                                    How quickly the text appears in your game.
                                    <br>‚Ä¢ Instant: For text that appears immediately - Most CPU usage
                                    <br>‚Ä¢ Normal: For most games with standard dialogue - Moderate CPU usage
                                    <br>‚Ä¢ Slow: For text that appears gradually - Least CPU usage
                                </span>
                            </label>
                            <select id="text-appearance-speed">
                                <option value="0.2">Instant</option>
                                <option value="0.5" selected>Normal</option>
                                <option value="0.8">Slow</option>
                                <option value="1.0">Very Slow</option>
                            </select>
                        </div>
                        <div id="language-select-group-basic">
                            <!-- Will be moved here dynamically -->
                        </div>
                        <div id="furigana-filter-group-basic">
                            <!-- Will be moved here dynamically -->
                        </div>
                        <div id="send-to-clipboard-group-basic">
                            <!-- Will be moved here dynamically -->
                        </div>
                    </div>
                    <div class="form-group">
                        <div id="manual-ocr-hotkey-group-basic">
                            <!-- Will be moved here dynamically -->
                        </div>
                        <div id="area-select-ocr-hotkey-group-basic">
                            <!-- Will be moved here dynamically -->
                        </div>
                        <div id="select_areas_button_basic" class="input-group" style="display:none;">
                            <button id="select-areas-button-basic">Change Area Config</button>
                            <div class="tooltip">‚ùì
                                <span class="tooltiptext">Select areas to OCR. This will open a window to select areas.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Advanced Mode Settings -->
            <div id="ocr-settings-grid-container" class="grid-container">
                <div class="form-group">
                    <div id="ocr1-select-group" class="input-group">
                        <label for="ocr1-input" class="tooltip-indicator">
                            Text Stability:
                            <span class="tooltiptext tooltiptext-right">
                                This will run at the set scan rate, and when the text stabilizes, it will
                                trigger the main OCR.
                                This should preferably be a fast engine. On Windows, OneOCR is recommended.
                            </span>
                        </label>
                        <select id="ocr1-input">
                            <option value="" disabled selected>Select Stability OCR</option>
                            <option value="oneocr">OneOCR (Recommended)</option>
                            <option value="meiki_text_detector">Meiki Text Detector (Experimental, Faster)</option>
                            <option value="alivetext">Apple Live Text (Mac Only)</option>
                            <option value="mangaocr">MangaOCR (Not Recommended)</option>
                            <option value="winrtocr">WindowsOCR</option>
                            <option value="local_llm_ocr">Local LLM OCR</option>
                        </select>
                    </div>
                    <div id="ocr2-select-group" class="input-group">
                        <label for="ocr2-input" class="tooltip-indicator">Main OCR:
                            <span class="tooltiptext tooltiptext-right">
                                This engine will be used to send the result to clipboard/websocket. This should
                                be an accurate engine. If Two Pass is enabled, it will be triggered after the
                                text has stabilized on screen.
                            </span>
                        </label>
                        <select id="ocr2-input">
                            <option value="" disabled selected>Select Main OCR</option>
                            <option value="glens">Google Lens (Accurate, Recommended)</option>
                            <option value="bing">Bing (Accurate) </option>
                            <option value="oneocr">OneOCR (Fast)</option>
                            <option value="meikiocr">Meiki OCR (Experimental, JP Only)</option>
                            <option value="gemini">Gemini (Accurate, API Key Required)</option>
                            <option value="mangaocr">MangaOCR (Not Recommended/Tested)</option>
                            <option value="gvision">Google Vision</option>
                            <option value="azure">Azure Image Analysis</option>
                            <option value="ocrspace">OCRSpace</option>
                            <option value="local_llm_ocr">Local LLM OCR</option>
                            <option value="alivetext">Apple Live Text (Mac Only)</option>
                        </select>
                    </div>
                    <div id="language-select-group" class="input-group">
                        <label for="languageSelect", class="tooltip-indicator">
                            Language:
                            <span class="tooltiptext tooltiptext-right">
                                Select the language for OCR Processing. This ensures only blocks with the correct characters are captured.
                                <br>
                                Note: All Latin Languages (English, Spanish, French, German, etc.) are supported under English.
                            </span>
                        </label>
                        <select id="languageSelect">
                            <option value="ja">Japanese</option>
                            <option value="zh">Chinese</option>
                            <option value="ko">Korean</option>
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="ru">Russian</option>
                            <option value="ar">Arabic</option>
                            <option value="hi">Hindi</option>
                        </select>
                    </div>
                    <div id="two-pass-ocr-group" class="input-group">
                        <label for="two-pass-ocr" class="tooltip-indicator tooltip-bottom tooltip-right">
                            <span class="tooltiptext">
                                OCR Option 1 runs at the set scan rate.
                                If two pass is enabled, and the text does not change by the next scan,
                                it will then do the second scan.
                            </span>
                            Enable Two Pass OCR:
                        </label>
                        <input type="checkbox" id="two-pass-ocr">
                    </div>
                    <div id="optimize-second-scan-group" class="input-group">
                        <label for="optimize-second-scan"
                            class="tooltip-indicator tooltip-bottom tooltip-right">
                            <span class="tooltiptext">Trim Image for second scan to improve performance. (OneOCR
                                1st ONLY)<br> If your game's text is odd, and some text doesn't get captured,
                                maybe try turning this off.</span>
                            Optimize 2nd scan:
                        </label>
                        <input type="checkbox" id="optimize-second-scan" checked>
                    </div>
                    <div id="furigana-filter-group" class="input-group">
                        <label id="furigana-filter-label" for="furigana-filter-sensitivity"
                            class="tooltip-indicator tooltip-bottom tooltip-right">
                            Furigana Filter Sensitivity:
                            <span class="tooltiptext">
                                Filters characters smaller than the selected text size. Very experimental, if
                                you
                                notice real text being filtered out, either lower this or disable by setting to
                                0.
                                <br><br>
                                <strong>Tip:</strong> Click <span style="color: blue;">Preview</span> to open a window that will help you select the best sensitivity for your current game.
                            </span>
                            <span id="furigana-filter-sensitivity-value">0</span>
                            <input type="range" id="furigana-filter-sensitivity" min="0" max="100" value="0"
                                step="1">
                        </label>
                        <span id="dynamic-size-display" style="cursor:pointer;">Preview</span>
                    </div>
                </div>
                <div class="form-group">
                    <div id="ocr-scan-rate-group" class="input-group">
                        <label for="ocr-scan-rate" class="tooltip-indicator tooltip-bottom tooltip-right">Scan
                            Rate (s):
                            <span class="tooltiptext">
                                <ul>
                                    <li>The OCR scan rate determines how frequently the OCR process scans the
                                        screen.</li>
                                    <li>Lower values increase responsiveness but may consume more resources.
                                    </li>
                                    <li>Higher values reduce resource usage but may delay updates.</li>
                                    <li>If your text doesn't appear instantly, lower values may result in
                                        partial text results.</li>
                                </ul>
                            </span>
                        </label>
                        <input type="number" id="ocr-scan-rate" value=".5" min="0" max="2.0" step=".1">
                    </div>
                    <div id="area-select-ocr-hotkey-group" class="input-group">
                        <label for="area-select-ocr-hotkey"
                            class="tooltip-indicator tooltip-bottom tooltip-right">Area Select Hotkey:
                            <span class="tooltiptext">On Press, will allow you to select an area to OCR one
                                time. Useful for menus</span>
                        </label>
                        <input type="text" id="area-select-ocr-hotkey" value="Ctrl+Shift+O">
                    </div>
                    <div id="manual-ocr-hotkey-group" class="input-group">
                        <label for="manual-ocr-hotkey"
                            class="tooltip-indicator tooltip-bottom tooltip-right">Manual/Menu OCR Hotkey:
                            <span class="tooltiptext">
                                Hotkey to manually OCR the selected area. This will run the OCR on the selected
                                area and return the result. <strong>Note:</strong> This uses the OCR Option 2,
                                and is also used to OCR Menus (Ctrl+Click in Area Selector)</span>
                        </label>
                        <input type="text" id="manual-ocr-hotkey" value="Ctrl+Shift+G">
                    </div>
                    <div id="ocr-screenshots-group" class="input-group">
                        <label for="ocr-screenshots" class="tooltip-indicator tooltip-bottom tooltip-right">OCR
                            Clipboard Screenshots:
                            <span class="tooltiptext">If enabled, OCR will also process screenshots taken from
                                the clipboard.</span>
                        </label>
                        <input type="checkbox" id="ocr-screenshots">
                    </div>
                    <div id="send-to-clipboard-group" class="input-group">
                        <label for="send-to-clipboard" class="tooltip-indicator tooltip-bottom tooltip-right">
                            <span class="tooltiptext">OCR Sends text to Websocket by default, with this enabled,
                                it will also copy to clipboard.</span>
                            (Optional) Send Text to Clipboard:
                        </label>
                        <input type="checkbox" id="send-to-clipboard">
                    </div>
                    <div id="keep-newline-group" class="input-group">
                        <label for="keep-newline" class="tooltip-indicator tooltip-bottom tooltip-right">
                            <span class="tooltiptext">If enabled, OCR will attempt to keep newlines in the
                                output text (for
                                better readability) NOT GUARANTEED.</span>
                            Maintain Line Breaks in Output:
                        </label>
                        <input type="checkbox" id="keep-newline">
                    </div>
                    <div id="select_areas_button_2" class="input-group" style="display:none;">
                        <button id="select-areas-button">Change Area Config</button>
                        <div class="tooltip">‚ùì
                            <span class="tooltiptext">Select areas to OCR. This will open a window to select
                                areas.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card" id="ocr-log-card" style="display: none;">
        <div class="terminal-container" id="ocr-terminal"></div>
    </div>

    <div id="ocr-controls-card" class="card">
        <div id="start-ocr-controls" class="input-group" style="justify-content: center;">
            <label class="tooltip">
                <span id="config-tooltip">‚úó</span>
                <span class="tooltiptext" id="ocr-config-summary"></span>
            </label>
            <button id="start-ocr">Start Auto OCR</button>
            <button id="start-ocr-ss-only" class="secondary">Start Manual OCR</button>
        </div>
        <div id="stop-ocr-controls" class="input-group"
            style="display: none; position: relative; justify-content: center; align-items: center; gap: 16px;">
            <label id="ocr-status-label"
                style="position: absolute; left: 0; text-align: left; font-size: 18px; padding-bottom: 15px"></label>
            <div style="display: flex; gap: 16px;">
                <button id="stop-ocr" class="danger">Stop OCR (Open Settings)</button>
                <button id="pause-ocr" class="secondary">Pause OCR</button>
            </div>
        </div>
    </div>

    <div id="debug-tools-card" class="card">
        <h2 id="debug-header" class="collapsible-header">
            Extra & Debug Tools <span class="arrow-icon">‚ñº</span>
        </h2>
        <div id="extra-debug-content" class="collapsible-content" style="display: none;">
            
            <div id="debug-grid-container" class="grid-container">
                <div id="dependency-select-group" class="input-group">
                    <label for="dependency-select">Optional:</label>
                    <select id="dependency-select">
                        <option value="pip install fpng-py">Faster PNG (Recommended if w11)
                        </option>
                        <option value="pip install owocr[winocr]">WindowsOCR</option>
                        <option value="pip install owocr[mangaocr]">MangaOCR</option>
                        <option value="pip install owocr[gvision]">Google Vision (apikey required)</option>
                        <option value="pip install owocr[azure]">Azure (apikey required)</option>
                        <option value="pip install owocr[ocrspace]">OCRSpace (apikey required)</option>
                    </select>
                    <button id="install-selected-dep" class="secondary">Install</button>
                    <div class="tooltip">‚ùì
                        <span class="tooltiptext">Install the selected dependency. If unsure, choose a
                            recommended option.</span>
                    </div>
                </div>
                <div class="form-group">
                    <button id="open-ocr-page-btn" class="secondary">Open OCR Error Fixes Page</button>
                    <button id="open-config-json" class="secondary">Open Config File</button>
                    <button id="open-config-folder" class="secondary">Open OCR Config Folder</button>
                    <button id="open-global-owocr-config" class="secondary">Open Global OWOCR Config</button>
                    <button id="open-temp-folder" class="secondary">Open Temp Folder (To see OCR'd Image
                        Samples)</button>
                </div>
                <div class="form-group">
                    <div id="dependency-removal-group" class="input-group">
                        <select id="dependency-select-removal">
                            <option value="owocr">OWOCR Base</option>
                            <option value="betterproto">Google Lens</option>
                            <option value="oneocr">OneOCR</option>
                            <option value="fpng-py">Faster PNG</option>
                            <option value="transformers sentencepiece">Accurate Filtering</option>
                            <option value="winocr">WindowsOCR</option>
                            <option value="manga-ocr">MangaOCR</option>
                            <option value="easyocr">EasyOCR</option>
                            <option value="rapidocr onnxruntime rapidocr_onnxruntime">RapidOCR</option>
                            <option value="google-cloud-vision">Google Vision</option>
                            <option value="azure-ai-vision-imageanalysis">Azure</option>
                            <option value="ocrspace">OCRSpace</option>
                        </select>
                        <button id="uninstall-selected-dep" class="danger">Uninstall</button>
                    </div>
                    <div id="uninstall-status"></div>
                </div>
            </div>
        </div>
    </div>
</div>
