<!DOCTYPE html>
<html lang="en" data-browser="unknown" data-os="unknown" data-manifest-version="unknown">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Yomitan Settings</title>
    <link rel="icon" type="image/png" href="/images/icon16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/images/icon19.png" sizes="19x19">
    <link rel="icon" type="image/png" href="/images/icon32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/icon38.png" sizes="38x38">
    <link rel="icon" type="image/png" href="/images/icon48.png" sizes="48x48">
    <link rel="icon" type="image/png" href="/images/icon64.png" sizes="64x64">
    <link rel="icon" type="image/png" href="/images/icon128.png" sizes="128x128">
    <link rel="stylesheet" type="text/css" href="/css/material.css">
    <link rel="stylesheet" type="text/css" href="/css/settings.css">
    <link rel="stylesheet" type="text/css" href="/css/visibility-modifiers.css">
    <link rel="stylesheet" type="text/css" href="/css/display-pronunciation.css">
    <script src="/js/pages/settings/settings-main.js" type="module"></script>
</head>
<body hidden>

<!-- Main content -->
<div class="content-outer"><div class="content scrollbar">
<div class="content-left">
    <div class="sidebar"><div class="sidebar-inner scrollbar">
        <div class="sidebar-body">
            <a href="#profile"          class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="profile"></span></span><span class="outline-item-label">Profile</span></a>
            <a href="#dictionaries"     class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="book"></span><span class="outline-item-left-warning-badge no-dictionaries-enabled-warning" hidden><div class="badge warning-badge"><span class="icon" data-icon="exclamation-point-short"></span></div></span></span><span class="outline-item-label">Dictionaries</span></a>
            <a href="#general"          class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="cog"></span></span><span class="outline-item-label">General</span></a>
            <a href="#scanning"         class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="scanning"></span></span><span class="outline-item-label">Scanning</span></a>
            <a href="#popup"            class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="popup"></span></span><span class="outline-item-label">Popup Behavior</span></a>
            <a href="#appearance"       class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="palette"></span></span><span class="outline-item-label">Appearance</span></a>
            <a href="#result-display"   class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="monitor"></span></span><span class="outline-item-label">Result Display</span></a>
            <a href="#popup-size"       class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="popup-size"></span></span><span class="outline-item-label">Position &amp; Size</span></a>
            <a href="#window"           class="button outline-item advanced-only"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="window"></span></span><span class="outline-item-label">Search Window</span></a>
            <a href="#audio"            class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="speaker"></span></span><span class="outline-item-label">Audio</span></a>
            <a href="#text-parsing"     class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="text-parsing"></span></span><span class="outline-item-label">Text Parsing</span></a>
            <a href="#translation"      class="button outline-item advanced-only"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="translation"></span></span><span class="outline-item-label">Translation</span></a>
            <a href="#anki"             class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="note-card"></span></span><span class="outline-item-label">Anki</span></a>
            <a href="#clipboard"        class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="clipboard"></span></span><span class="outline-item-label">Clipboard</span></a>
            <a href="#shortcuts"        class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="keyboard"></span></span><span class="outline-item-label">Shortcuts</span></a>
            <a href="#backup"           class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="backup"></span></span><span class="outline-item-label">Backup</span></a>
            <a href="#accessibility"    class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="accessibility"></span></span><span class="outline-item-label">Accessibility</span></a>
            <a href="#security"         class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="lock"></span></span><span class="outline-item-label">Security</span></a>
        </div>
        <div class="sidebar-bottom">
            <label class="button outline-item"><span class="outline-item-left">
                <label class="toggle advanced-toggle"><input id="advanced-checkbox" type="checkbox" data-setting="general.showAdvanced"
                    data-transform='{
                        "type": "setAttribute",
                        "selector": ":root",
                        "attribute": "data-advanced"
                    }'
                ><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </span><span class="outline-item-label">Advanced</span></label>
            <label class="button outline-item advanced-only"><span class="outline-item-left">
                <label class="toggle debug-toggle"><input id="debug-checkbox" type="checkbox" data-setting="general.showDebug"
                    data-transform='{
                        "type": "setAttribute",
                        "selector": ":root",
                        "attribute": "data-debug"
                    }'
                ><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </span><span class="outline-item-label">Debug</span></label>
            <a href="/info.html" class="button outline-item"><span class="outline-item-left"><span class="outline-item-icon icon" data-icon="question-mark"></span></span><span class="outline-item-label">About Yomitan</span></a>
        </div>
    </div></div>
</div>
<div class="content-center">

    <span tabindex="-1" id="content-scroll-focus"></span>

    <h1>Yomitan Settings</h1>

    <!-- Notifications -->
    <div class="settings-group settings-group-top-margin page-loading-stalled-notification">
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">
                    <p>
                        This page is taking longer than expected to load.
                    </p>
                    <p data-show-for-browser="safari">
                        Due to a bug in Safari, it may be necessary to click the <img src="/images/yomitan-icon.svg" class="inline-icon" alt=""> <em>Yomitan</em>
                        button in the browser bar to fully load the page
                    </p>
                </div>
            </div>
        </div></div>
    </div>

    <!-- Profile -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="profile"></span></div>
        <div class="heading-container-left"><h2 id="profile"><a href="#profile">Profile</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Active profile</div>
                <div class="settings-item-description">Switch the active profile that is used for scanning.</div>
            </div>
            <div class="settings-item-right">
                <select id="profile-active-select"></select>
            </div>
        </div></div>
        <div class="settings-item settings-item-button" data-modal-action="show,profiles"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure profiles&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
    </div>

        <!-- General -->
        <div class="heading-container">
            <div class="heading-container-icon"><span class="icon" data-icon="cog"></span></div>
            <div class="heading-container-left"><h2 id="general"><a href="#general">General</a></h2></div>
        </div>
        <div class="settings-group">
            <div class="settings-item"><div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Enable Yomitan</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.enable"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div></div>
            <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Language
                    </div>
                    <div class="settings-item-description">
                        Language of the text that is being looked up.
                    </div>
                </div>
                <div class="settings-item-right">
                    <select id="language-select" data-setting="general.language"
                    data-transform='{
                        "type": "setAttribute",
                        "selector": ":root",
                        "attribute": "data-language"
                    }'
                    ></select>
                </div>
            </div></div>
            <div class="settings-item"><div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Show the <a href="/welcome.html" target="_blank" rel="noopener">welcome guide</a> on browser startup</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.showGuide"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div></div>
            <div class="settings-item advanced-only"><div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Show "Lookup in Yomitan" in right-click menu</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.enableContextMenuScanSelected"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div></div>
            <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Maximum number of results</div>
                    <div class="settings-item-description">Adjust the maximum number of results shown for lookups.</div>
                </div>
                <div class="settings-item-right">
                    <input type="number" min="1" data-setting="general.maxResults">
                </div>
            </div></div>
            <div class="settings-item advanced-only">
                <div class="settings-item-inner">
                    <div class="settings-item-left">
                        <div class="settings-item-invalid-indicator"></div>
                        <div class="settings-item-label">
                            Enable Yomitan API
                        </div>
                        <div class="settings-item-description">
                            Enable support for sending local web requests to fetch data from Yomitan.
                        </div>
                        <div class="settings-item-description">
                            This option may send data outside of Yomitan to local applications that request it<span data-show-for-browser="firefox firefox-mobile"> (<a href="https://addons.mozilla.org/en-US/firefox/addon/yomitan/privacy/">Privacy Policy</a>)</span>.
                            <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                        </div>
                    </div>
                    <div class="settings-item-right">
                        <label class="toggle"><input type="checkbox" class="permissions-toggle" data-permissions-setting="general.enableYomitanApi" data-required-permissions="nativeMessaging"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#yomitan-api-additional-options",
                            "condition": {"op": "===", "value": true}
                        }'
                    ><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                    </div>
                </div>
                <div class="settings-item-children more" hidden>
                    <p>
                        To activate the Yomitan API, a native messaging component must be installed.
                        A setup guide can be found <a href="https://github.com/Kuuuube/yomitan-api/blob/master/README.md" target="_blank" rel="noopener noreferrer">here</a>.
                    </p>
                    <div class="margin-above flex-row-nowrap">
                        <button type="button" id="test-yomitan-api-button">Test</button>
                        <input id="test-yomitan-url-input" class="flex-margin-left" type="text" placeholder="http://127.0.0.1:19633" spellcheck="false" autocomplete="off" data-setting="general.yomitanApiServer">
                        <div id="test-yomitan-api-results" class="flex-margin-left" hidden></div>
                    </div>
                    <p class="margin-above">
                        <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                    </p>
                </div>
                <div class="settings-item-children settings-item-children-group" id="yomitan-api-additional-options" hidden>
                    <div class="settings-item">
                        <div class="settings-item-inner settings-item-inner-wrappable">
                            <div class="settings-item-left">
                                <div class="settings-item-label">
                                    Allow bypassing css sanitization
                                </div>
                                <div class="settings-item-description">
                                    <p class="warning-text">
                                        Only enable this option if you trust the authors of your dictionaries or will perform sanitization outside of Yomitan.
                                        Malicious dictionaries can send malformed CSS to allow Javascript execution if injected into a webview or browser.
                                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                                    </p>
                                </div>
                                <div class="settings-item-description more" hidden>
                                    <p>
                                        A malicious dictionary which contains malicious CSS may try to execute Javascript.
                                        For example, if the output of the Yomitan API is used in Anki, then the resulting Anki card may execute unintended Javascript.
                                        The risk in this case is similar to downloading a malicious Anki deck.
                                        Namely, in both cases, you are relying purely on Anki's sandbox to protect your machine and information from the malicious code.
                                        If the Anki sandbox works, card contents could be leaked (a minor confidential issue).
                                        If the sandbox fails, there is much more to worry about (actions being taken on your machine such as stealing credentials and sensitive information, or ransomware taking over your computer).
                                    </p>
                                    <p>
                                        If you choose to disable the CSS sanitization, we recommend thinking end-to-end about where the Yomitan API output is used, and whether that destination is resilient to potentially malicious Javascript code being included, otherwise you are potentially risking the data and integrity of your system.
                                    </p>
                                    <p>
                                        Sanitization bypass will allow CSS that cannot be sanitized to pass through the sanitizer unchanged.
                                        This ONLY applies to the Yomitan API, it will not make any other areas of Yomitan potentially vulnerable.
                                    </p>
                                    <p>
                                        This can be required to retrieve CSS on some browsers which do not support the offscreen page necessary for full CSS sanitization in the Yomitan API on the backend.
                                        Yomitan will attempt to fall back on basic sanitization but this will fail for dictionaries making use of complex CSS.
                                    </p>
                                    <p class="margin-above">
                                        <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                                    </p>
                                </div>
                            </div>
                            <div class="settings-item-right">
                                <label class="toggle"><input type="checkbox" data-setting="general.yomitanApiAllowCssSanitizationBypass"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <!-- Dictionaries -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="book"></span></div>
        <div class="heading-container-left"><h2 id="dictionaries"><a href="#dictionaries">Dictionaries</a> <span class="heading-sub-text no-wrap" data-modal-action="show,dictionaries">(<span id="dictionary-install-count">#</span> installed, <span id="dictionary-enabled-count">#</span> enabled)</span></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item settings-item-button" data-modal-action="show,dictionaries"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">
                    <div class="flex-row-nowrap">
                        <div>Configure installed and enabled dictionaries&hellip;</div>
                        <div class="flex-margin-left badge warning-badge no-dictionaries-enabled-warning" hidden><span class="icon" data-icon="exclamation-point-short"></span></div>
                    </div>
                </div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
        <div class="settings-item">
            <div class="settings-item settings-item-button" data-modal-action="show,recommended-dictionaries"><div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Get recommended dictionaries&hellip;</div>
                </div>
                <div class="settings-item-right open-panel-button-container">
                    <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
                </div>
            </div></div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Storage</div>
                    <div class="settings-item-description">
                        <span class="storage-use-invalid">
                            Yomitan is using an indeterminate amount of storage.
                        </span>
                        <span class="storage-use-finite" hidden>
                            Yomitan is using approximately <span class="storage-usage">?</span> of <span class="storage-quota">?</span>.
                            <div class="storage-exhaustion-alert warning-text margin-above">
                                <div>
                                    <strong>Your system is running low on storage space.</strong><br>
                                    Importing dictionaries may fail.
                                </div>
                            </div>
                        </span>
                        <span class="storage-use-infinite" hidden>
                            Yomitan is permitted unlimited storage.
                        </span>
                    </div>
                </div>
                <div class="settings-item-right">
                    <button type="button" id="storage-refresh" class="low-emphasis">Refresh</button>
                </div>
            </div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Frequency sorting dictionary</div>
                    <div class="settings-item-description">
                        Sort results using a frequency dictionary.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <select id="sort-frequency-dictionary"></select>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Enabling this option will sort search results using a specific dictionary.
                    This can be beneficial when using multiple dictionaries which may not have
                    consistent sorting information.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
            <div class="settings-item-children settings-item-children-group advanced-only" id="sort-frequency-dictionary-order-container" hidden>
                <div class="settings-item">
                    <div class="settings-item-inner settings-item-inner-wrappable">
                        <div class="settings-item-left">
                            <div class="settings-item-label">
                                Frequency sorting mode
                                <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                            </div>
                        </div>
                        <div class="settings-item-right">
                            <div class="horizontal-flex horizontal-flex-nowrap">
                                <button type="button" class="low-emphasis" id="sort-frequency-dictionary-order-auto">Auto</button>
                                <select id="sort-frequency-dictionary-order">
                                    <option value="descending">Occurrence-based</option>
                                    <option value="ascending">Rank-based</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="settings-item-children more" hidden>
                        <p>
                            Dictionary frequency data can be represented in one of two ways:
                        </p>
                        <ul>
                            <li>
                                <em>Occurrence-based</em>, where the frequency corresponds to a number of occurrences.
                                Large values indicate a more common term.
                            </li>
                            <li>
                                <em>Rank-based</em>, where the frequency value corresponds to a ranking index.
                                Smaller values indicate a more common term.
                            </li>
                        </ul>
                        <p>
                            The correct mode can be determined based on the contents of the dictionary;
                            the <em>Auto</em> button attempts to auto-detect the correct value.
                        </p>
                        <p>
                            <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Persistent storage</div>
                    <div class="settings-item-description">
                        Enable to help prevent the browser from unexpectedly clearing the database.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" id="storage-persistent-checkbox"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Web browsers will sometimes clear stored data if the device is running low on storage space.
                    This can result in the imported dictionaries being deleted unexpectedly, causing Yomitan to stop functioning.
                    Enabling persistent storage tells the browser that the data should not be deleted in those circumstances.
                </p>
                <p data-show-for-browser="firefox firefox-mobile" class="storage-use-invalid" hidden>
                    On Firefox and Firefox for Android, the storage information feature may be hidden behind a browser flag.

                    To enable this flag, open <a href="about:config" target="_blank" rel="noopener">about:config</a> and search for
                    <strong>dom.storageManager.enabled</strong>.

                    Setting its value to <strong>true</strong> should allow storage information to be calculated.
                </p>
                <p data-show-for-browser="firefox-mobile">
                    It may not be possible to enable Persistent Storage on Firefox for Android.
                </p>
                <p data-show-for-browser="chrome edge">
                    Chromium-based browsers should not need to enable this setting since the Yomitan extension has
                    the <code>unlimitedStorage</code> permission, which should prevent data deletion.<sup><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=680392#c15" target="_blank" rel="noopener">[1]</a></sup>
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Scanning -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="scanning"></span></div>
        <div class="heading-container-left"><h2 id="scanning"><a href="#scanning">Scanning</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Scan modifier key</div>
                    <div class="settings-item-description">
                        Hold a key while moving the cursor to scan text.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <select id="main-scan-modifier-key"></select>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    A keyboard modifier key can be used to activate text scanning when the cursor is moved.
                    Alternatively, the <em>No key</em> option can be used to scan text whenever the cursor is moved,
                    without requiring any key to be held.
                </p>
                <p>
                    More advanced scanning input customization can be set up by enabling the <em>Advanced</em> option
                    and clicking <em data-modal-action="show,scanning-inputs">Configure advanced scanning inputs</em>.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item not-jpzhyueko">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Scan resolution</div>
                    <div class="settings-item-description">
                        Start the lookup scan at the word or character of the cursor position.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="scanning.scanResolution">
                        <option value="character">Character</option>
                        <option value="word">Word</option>
                    </select>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    The scan resolution determines where the scan starts when the cursor is moved.
                    The <code>Character</code> option will start scanning at the cursor's current position,
                    while the <code>Word</code> option will start scanning at the beginning of the word.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Scan using middle mouse button</div>
                <div class="settings-item-description">Hold the middle mouse button while moving the cursor to scan text.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" id="middle-mouse-button-scan"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item settings-item-button advanced-only" data-modal-action="show,scanning-inputs"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure advanced scanning inputs&hellip; <span class="light no-wrap">(<span class="scanning-input-count">#</span> defined)</span></div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Scan delay <span class="light">(in milliseconds)</span></div>
                <div class="settings-item-description">Change the delay before scanning occurs when no modifier key is required.</div>
            </div>
            <div class="settings-item-right">
                <input type="number" data-setting="scanning.delay" min="0">
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Scan without mouse move</div>
                <div class="settings-item-description">Allow scanning words under the pointer without the pointer being in motion.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.scanWithoutMousemove"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Select matched text</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.selectText"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item jpzhyueko-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Search text with non-Japanese, Chinese, or Korean characters</div>
                <div class="settings-item-description">Only applies when language is set to Japanese, Chinese, Cantonese, or Korean.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.alphanumeric"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Layout-aware scanning</div>
                <div class="settings-item-description">Use webpage styling information to determine where line breaks are likely to be.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.layoutAwareScan"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Deep content scanning</div>
                <div class="settings-item-description">Enable scanning text that is covered by other layers.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.deepDomScan"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Normalize CSS zoom</div>
                    <div class="settings-item-description">
                        Correct the pointer location on webpages where CSS <code>zoom</code> is used.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="scanning.normalizeCssZoom"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    The non-standard CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/zoom" target="_blank" rel="noopener noreferrer"><code>zoom</code></a> property interferes with the normal calculation of the pointer coordinates when scanning webpages. This property is discouraged from being used and its use is rare, but some webpages may still use it.
                </p>
                <p>
                    Enabling this option, which is on by default, will take the value of this property into account when scanning webpage content. It is currently put behind an option in case there are unforeseen negative side effects.
                </p>
                <p>
                    This setting does not have any effect in Firefox, as it does not implement the <code>zoom</code> property.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Wildcard scanning</div>
                    <div class="settings-item-description">
                        Enable suffix wildcard when looking up scanned webpage text.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="scanning.matchTypePrefix"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Rather than searching for the source text exactly, the text will only be required to be a prefix of an existing term.
                    For example, scanning 読み will effectively search for 読み*, which may bring up additional results such as 読み方.
                </p>
                <p class="danger-text">
                    This will likely cause scanning and lookup to be slower, and the results may not be as relevant.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Text scan length</div>
                <div class="settings-item-description">Change how many characters are read when scanning for terms.</div>
                <div class="warning-text margin-above">
                    <strong>Setting this value too high (100+) may impact performance.</strong>
                </div>
            </div>
            <div class="settings-item-right">
                <input type="number" data-setting="scanning.length" min="1" step="1">
            </div>
        </div></div>
        <div class="settings-item settings-item-button advanced-only" data-modal-action="show,input-action-prevention"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure input action prevention&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
    </div>

    <!-- Popup Behavior -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="popup"></span></div>
        <div class="heading-container-left"><h2 id="popup"><a href="#popup">Popup Behavior</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Allow scanning search page content</div>
                <div class="settings-item-description">Text on the <a href="/search.html" target="_blank" rel="noopener">search page</a> can be scanned for definitions, which will open a popup.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.enableOnSearchPage"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Allow scanning popup content</div>
                    <div class="settings-item-description">Text inside of popups can be scanned for definitions, which will open a new popup.</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" id="nested-popups-enabled"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children settings-item-children-group" id="nested-popups-enabled-more-options" hidden>
                <div class="settings-item"><div class="settings-item-inner">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Maximum number of child popups</div>
                        <div class="settings-item-description">Change the limit on the number of popups that may be generated.</div>
                    </div>
                    <div class="settings-item-right">
                        <input type="number" min="0" step="1" id="nested-popups-count">
                    </div>
                </div></div>
                <div class="settings-item advanced-only"><div class="settings-item-inner">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Allow scanning popup source terms</div>
                    </div>
                    <div class="settings-item-right">
                        <label class="toggle"><input type="checkbox" data-setting="scanning.enableOnPopupExpressions"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                    </div>
                </div></div>
            </div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Auto-hide search popup</div>
                    <div class="settings-item-description">When an existing popup is present, upon scanning again, hide the existing popup even if no definitions are found when scanning again.</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="scanning.autoHideResults"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#auto-hide-search-popup-options",
                            "condition": {"op": "===", "value": true}
                        }'
                    ><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children settings-item-children-group" id="auto-hide-search-popup-options" hidden>
                <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Delay <span class="light">(in milliseconds)</span></div>
                    </div>
                    <div class="settings-item-right">
                        <input type="number" data-setting="scanning.hideDelay" min="0">
                    </div>
                </div></div>
            </div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Hide popup on cursor exit</div>
                    <div class="settings-item-description">When the cursor exits the popup, the popup will be hidden.</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="scanning.hidePopupOnCursorExit"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#hide-popup-on-cursor-exit-options",
                            "condition": {"op": "===", "value": true}
                        }'
                    ><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children settings-item-children-group" id="hide-popup-on-cursor-exit-options" hidden>
                <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Delay <span class="light">(in milliseconds)</span></div>
                    </div>
                    <div class="settings-item-right">
                        <input type="number" data-setting="scanning.hidePopupOnCursorExitDelay" min="0">
                    </div>
                </div></div>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Reduced motion scrolling</div>
                    <div class="settings-item-description">Scrolls by a configurable height (similar to pagination), reducing animations. Useful on e-readers and e-ink screens.</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox"
                        data-setting="scanning.reducedMotionScrolling"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#reduced-motion-scrolling-options",
                            "condition": {"op": "===", "value": true}
                        }'
                    ><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children settings-item-children-group" id="reduced-motion-scrolling-options" hidden>
                <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Scale</div>
                        <div class="settings-item-description">Percentage of the popup's height scrolled per step.</div>
                    </div>
                    <div class="settings-item-right">
                        <select data-setting="scanning.reducedMotionScrollingScale"
                            data-transform='[
                                {"type": "toNumber", "step": "pre", "constraints": {"min": 0.4}},
                                {"type": "toString", "step": "post"}
                            ]'
                        >
                            <option value="0.4">40%</option>
                            <option value="0.5">50%</option>
                            <option value="0.6">60%</option>
                            <option value="0.7">70%</option>
                            <option value="0.8">80%</option>
                            <option value="0.9">90%</option>
                            <option value="1">100%</option>
                        </select>
                    </div>
                </div></div>
                <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Swipe threshold</div>
                        <div class="settings-item-description">Minimum distance on touch devices for a swipe to be recognized as scrolling. Lower values can feel more responsive but increase the chance for misinputs.</div>
                    </div>
                    <div class="settings-item-right">
                        <div class="settings-item-group">
                            <div class="settings-item-group-item">
                                <div class="settings-item-group-item-label">px</div>
                                <input type="number" class="short-width short-height" data-setting="scanning.reducedMotionScrollingSwipeThreshold" min="0">
                            </div>
                        </div>
                    </div>
                </div></div>
            </div>
        </div>
        <div class="settings-item advanced-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Search terms when clicking text from the results list</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.enablePopupSearch"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Show iframe popups in the root frame
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.showIframePopupsInRootFrame"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    By default, scanning text inside of an embeded <code>&lt;iframe&gt;</code> element will open
                    a new popup inside of that frame, which can sometimes be limiting due to the frame's size.
                    When this option is enabled, the popup will be created in the root of the page, if possible.
                </p>
                <p>
                    Note that when this option is enabled, there is a possibility that the extension can interfere with the underlying webpage,
                    since it must send messages to the webpage in order to determine the correct position of the popup.
                    This typically does not cause issues, but if anything unexpected happens, this option could be the cause.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Appearance -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="palette"></span></div>
        <div class="heading-container-left"><h2 id="appearance"><a href="#appearance">Appearance</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Theme</div>
                <div class="settings-item-description">Adjust the style of Yomitan.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Body</div>
                        <select data-setting="general.popupTheme" class="short-width short-height">
                            <option value="site">Auto</option>
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="browser">Browser</option>
                        </select>
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Shadow</div>
                        <select data-setting="general.popupOuterTheme" class="short-width short-height">
                            <option value="site">Auto</option>
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="browser">Browser</option>
                            <option value="none">None</option>
                        </select>
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Action bar appearance</div>
                    <div class="settings-item-description">Control when and where the action bar is visible.</div>
                </div>
                <div class="settings-item-right">
                    <div class="settings-item-group">
                        <div class="settings-item-group-item">
                            <div class="settings-item-group-item-label">Visibility</div>
                            <select data-setting="general.popupActionBarVisibility" class="short-width short-height">
                                <option value="auto">Auto</option>
                                <option value="always">Always</option>
                            </select>
                        </div>
                        <div class="settings-item-group-item">
                            <div class="settings-item-group-item-label">Location</div>
                            <select data-setting="general.popupActionBarLocation" class="short-width short-height">
                                <option value="left">Left</option>
                                <option value="right">Right</option>
                                <option value="top">Top</option>
                                <option value="bottom">Bottom</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Font family</div>
                    <div class="settings-item-description">
                        Change the font family used in Yomitan.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <div class="settings-item-group">
                        <input type="text" class="font-family-input" spellcheck="false" autocomplete="off" data-setting="general.fontFamily">
                    </div>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <div>
                    The font family can be changed to any font installed on your system.<br>
                    You can input things such as <code>sans-serif</code>, <code>serif</code>, or <code>monospace</code>.<br>
                    If you want to specify one or multiple specific fonts, you can type them in manually separated by commas,
                    for example <pre><code>"Noto Sans JP", "Meiryo", sans-serif</code></pre>
                </div>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Font size</div>
                    <div class="settings-item-description">Change the font size used in popups, in pixels.</div>
                </div>
                <div class="settings-item-right">
                    <div class="settings-item-group">
                        <input type="number" class="short-width short-height" data-setting="general.fontSize" min="1">
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Line height</div>
                    <div class="settings-item-description">Change the space between lines of text in popups. This will usually be a decimal number between 1 and 2.</div>
                </div>
                <div class="settings-item-right">
                    <div class="settings-item-group">
                        <input type="text" class="short-width short-height" data-setting="general.lineHeight">
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Compact glossaries</div>
                <div class="settings-item-description">Display term glossaries using a more compact layout.</div>
            </div>
            <div class="settings-item-right">
                <select data-setting="general.glossaryLayoutMode">
                    <option value="default">Default</option>
                    <option value="compact">Compact Popup</option>
                    <option value="compact-popup-anki">Compact Popup and Anki</option>
                </select>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Compact tags</div>
                <div class="settings-item-description">Show fewer repeated tags for term glossaries.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="general.compactTags"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Show tags for expressions and their readings</div>
                <div class="settings-item-description">These tags can be scanned if the options for popup content scanning are enabled.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="scanning.enableSearchTags"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item debug-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Show debug information</div>
                <div class="settings-item-description">A menu option to log debugging information will be shown in the search results.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="general.debugInfo"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only jpzhyue-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Term display style</div>
                <div class="settings-item-description">Change how terms and their readings are displayed.</div>
            </div>
            <div class="settings-item-right">
                <select data-setting="general.termDisplayMode">
                    <option value="ruby">Term furigana</option>
                    <option value="ruby-and-reading">Term furigana and reading</option>
                    <option value="term-and-reading">Plain term and reading</option>
                    <option value="term-only">Plain term</option>
                </select>
            </div>
        </div></div>
        <div class="settings-item advanced-only jp-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Reading mode</div>
                <div class="settings-item-description">Change what type of furigana is displayed for parsed text. Japanese only.</div>
            </div>
            <div class="settings-item-right">
                <select data-setting="parsing.readingMode" lang="ja">
                    <option value="none">None</option>
                    <option value="hiragana">ひらがな</option>
                    <option value="katakana">カタカナ</option>
                    <option value="romaji">Romaji</option>
                    <option value="dictionary-reading">Dictionary reading</option>
                </select>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Frequency display style</div>
                <div class="settings-item-description">Change how frequency information is presented.</div>
            </div>
            <div class="settings-item-right">
                <select data-setting="general.frequencyDisplayMode">
                    <option value="tags">Tags</option>
                    <option value="tags-grouped">Tags, grouped content</option>
                    <option value="split-tags">Split tags</option>
                    <option value="split-tags-grouped">Split tags, grouped content</option>
                    <option value="inline-list">Inline list</option>
                    <option value="list">List</option>
                </select>
            </div>
        </div></div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Selection indicator style</div>
                    <div class="settings-item-description">Change how the selected definition entry is visually indicated.</div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="general.popupCurrentIndicatorMode">
                        <option value="none">None</option>
                        <option value="asterisk">Asterisk</option>
                        <option value="triangle">Triangle</option>
                        <option value="bar-left">Vertical bar (left)</option>
                        <option value="bar-right">Vertical bar (right)</option>
                        <option value="dot-left">Small dot (left)</option>
                        <option value="dot-right">Small dot (right)</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Pitch accent display styles
                    </div>
                    <div class="settings-item-description">
                        Japanese only.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right flex-row-wrap">
                    <div class="settings-item-group settings-item-group-wrap">
                        <label class="settings-item-group-item flex-label no-wrap">
                            <label class="checkbox"><input type="checkbox" data-setting="general.showPitchAccentDownstepNotation"><span class="checkbox-body"><span class="checkbox-fill"></span><span class="checkbox-border"></span><span class="checkbox-check"></span></span></label>
                            <span>Downstep notation</span>
                        </label>
                        <label class="settings-item-group-item flex-label no-wrap">
                            <label class="checkbox"><input type="checkbox" data-setting="general.showPitchAccentPositionNotation"><span class="checkbox-body"><span class="checkbox-fill"></span><span class="checkbox-border"></span><span class="checkbox-check"></span></span></label>
                            <span>Downstep position</span>
                        </label>
                        <label class="settings-item-group-item flex-label no-wrap">
                            <label class="checkbox"><input type="checkbox" data-setting="general.showPitchAccentGraph"><span class="checkbox-body"><span class="checkbox-fill"></span><span class="checkbox-border"></span><span class="checkbox-check"></span></span></label>
                            <span>Graph</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Pitch accents for terms and expressions can be shown if a dictionary supporting pitch accents is installed.
                    There are currently three different ways that pitch accents can be presented:
                </p>
                <ul>
                    <li>
                        <strong>Downstep notation</strong> -
                        <span class="format-preview" lang="ja">
                            <span class="pronunciation-text-container"><span class="pronunciation-text"><span class="pronunciation-mora" data-position="0" data-pitch="high" data-pitch-next="low"><span class="pronunciation-character">よ</span><span class="pronunciation-mora-line"></span></span><span class="pronunciation-mora" data-position="1" data-pitch="low" data-pitch-next="low"><span class="pronunciation-character">む</span><span class="pronunciation-mora-line"></span></span></span></span>
                        </span>
                    </li>
                    <li>
                        <strong>Downstep position</strong> -
                        <span class="format-preview">
                            <span class="pronunciation-downstep-notation-container"><span class="pronunciation-downstep-notation" data-downstep-position="1"><span class="pronunciation-downstep-notation-prefix">[</span><span class="pronunciation-downstep-notation-number">1</span><span class="pronunciation-downstep-notation-suffix">]</span></span></span>
                        </span>
                    </li>
                    <li>
                        <strong>Graph</strong> -
                        <span class="format-preview">
                            <span class="pronunciation-graph-container">
                                <svg xmlns="http://www.w3.org/2000/svg" class="pronunciation-graph" focusable="false" viewBox="0 0 150 100">
                                    <path class="pronunciation-graph-line" d="M25 25 L75 75"></path>
                                    <path class="pronunciation-graph-line-tail" d="M75 75 L125 75"></path>
                                    <circle class="pronunciation-graph-dot-downstep1" cx="25" cy="25" r="15"></circle>
                                    <circle class="pronunciation-graph-dot-downstep2" cx="25" cy="25" r="5"></circle>
                                    <circle class="pronunciation-graph-dot" cx="75" cy="75" r="15"></circle>
                                    <path class="pronunciation-graph-triangle" d="M0 13 L15 -13 L-15 -13 Z" transform="translate(125,75)"></path>
                                </svg>
                            </span>
                        </span>
                    </li>
                </ul>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item settings-item-button advanced-only" data-modal-action="show,collapsible-dictionaries"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure collapsible dictionaries&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
        <div class="settings-item settings-item-button advanced-only" data-modal-action="show,custom-css"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure custom CSS&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
    </div>

    <!-- Result Display -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="monitor"></span></div>
        <div class="heading-container-left"><h2 id="result-display"><a href="#result-display">Result Display</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Result grouping mode</div>
                    <div class="settings-item-description">
                        Change how related results are grouped.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="general.resultOutputMode"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#main-dictionary-container",
                            "condition": {"op": "===", "value": "merge"}
                        }'
                    >
                        <option value="split">No grouping</option>
                        <option value="group">Group term-reading pairs</option>
                        <option value="merge">Group related terms</option>
                    </select>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <ul>
                    <li>
                        <strong>No grouping</strong> -
                        Every definition will be listed as a separate entry.
                    </li>
                    <li>
                        <strong>Group term-reading pairs</strong> -
                        Definitions for the same term with the same reading will be grouped together.
                    </li>
                    <li>
                        <p>
                            <strong>Group related terms</strong> -
                            Related terms that share the same definitions will be grouped together.
                        </p>
                        <p>
                            The <em>Primary dictionary</em> option should be assigned to a dictionary which contains related term information,
                            and configuring the <em>Secondary dictionaries</em> will allow definitions for the related terms to be
                            included from other dictionaries.
                        </p>
                        <p class="warning-text">
                            Not all dictionaries are able to be selected as the <em>Primary dictionary</em>.
                        </p>
                    </li>
                </ul>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
            <div class="settings-item-children settings-item-children-group" id="main-dictionary-container" hidden>
                <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Primary dictionary</div>
                    </div>
                    <div class="settings-item-right">
                        <select data-setting="general.mainDictionary"></select>
                    </div>
                </div></div>
                <div class="settings-item settings-item-button" data-modal-action="show,secondary-search-dictionaries"><div class="settings-item-inner">
                    <div class="settings-item-left">
                        <div class="settings-item-label">Secondary dictionaries&hellip;</div>
                    </div>
                    <div class="settings-item-right open-panel-button-container">
                        <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
                    </div>
                </div></div>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Average frequencies</div>
                <div class="settings-item-description">Compress frequency tags into one "Average" frequency tag based on the harmonic mean.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="general.averageFrequency"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
    </div>

    <!-- Popup Position & Size -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="popup-size"></span></div>
        <div class="heading-container-left"><h2 id="popup-size"><a href="#popup-size">Popup Position &amp; Size</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Display mode</div>
                    <div class="settings-item-description">
                        Change the layout of the popup.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="general.popupDisplayMode">
                        <option value="default">Default</option>
                        <option value="full-width">Full width</option>
                    </select>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    The <em>Default</em> mode will position the popup relative to the scanned text.
                    The <em>Full Width</em> mode will anchor the popup to the top or bottom of the screen and take up
                    the full width of the screen, which can be useful on devices with touch screens.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Scale</div>
                    <div class="settings-item-description">Control the scaling factor of the popup.</div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="general.popupScalingFactor"
                        data-transform='[
                            {"type": "toNumber", "step": "pre", "constraints": {"min": 0.25}},
                            {"type": "toString", "step": "post"}
                        ]'
                    >
                        <option value="0.25">25%</option>
                        <option value="0.33">33%</option>
                        <option value="0.5">50%</option>
                        <option value="0.67">67%</option>
                        <option value="0.75">75%</option>
                        <option value="0.8">80%</option>
                        <option value="0.9">90%</option>
                        <option value="1">100%</option>
                        <option value="1.1">110%</option>
                        <option value="1.25">125%</option>
                        <option value="1.5">150%</option>
                        <option value="1.75">175%</option>
                        <option value="2">200%</option>
                        <option value="2.5">250%</option>
                        <option value="3">300%</option>
                        <option value="4">400%</option>
                        <option value="5">500%</option>
                    </select>
                </div>
            </div>
            <div class="settings-item-children settings-item-children-group advanced-only">
                <div class="settings-item">
                    <div class="settings-item-inner">
                        <div class="settings-item-left">
                            <div class="settings-item-label">
                                Auto-scale
                                <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                            </div>
                        </div>
                        <div class="settings-item-right flex-row-wrap">
                            <div class="settings-item-group settings-item-group-wrap">
                                <label class="settings-item-group-item flex-label no-wrap">
                                    <label class="checkbox"><input type="checkbox" data-setting="general.popupScaleRelativeToPageZoom"><span class="checkbox-body"><span class="checkbox-fill"></span><span class="checkbox-border"></span><span class="checkbox-check"></span></span></label>
                                    <span>Zoom level</span>
                                </label>
                                <label class="settings-item-group-item flex-label no-wrap">
                                    <label class="checkbox"><input type="checkbox" data-setting="general.popupScaleRelativeToVisualViewport"><span class="checkbox-body"><span class="checkbox-fill"></span><span class="checkbox-border"></span><span class="checkbox-check"></span></span></label>
                                    <span>Viewport</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="settings-item-children more" hidden>
                        <p>
                            Auto-scaling will scale the popup automatically based on the browser's zoom levels
                            in order to keep the popup at a constant physical size, regardless of the zoom level.
                            <em>Zoom level</em> uses the zoom level that is typically used on desktop browsers,
                            and <em>Viewport</em> uses the zoom level that is typically used on mobile browsers.
                        </p>
                        <p>
                            <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Size</div>
                <div class="settings-item-description">Control the size of the popup, in pixels.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Width</div>
                        <input type="number" class="short-width short-height" min="1" data-setting="general.popupWidth">
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Height</div>
                        <input type="number" class="short-width short-height" min="1" data-setting="general.popupHeight">
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Horizontal text positioning</div>
                <div class="settings-item-description">Change where the popup is positioned relative to horizontal text.</div>
            </div>
            <div class="settings-item-right">
                <select data-setting="general.popupHorizontalTextPosition">
                    <option value="below">Below text</option>
                    <option value="above">Above text</option>
                </select>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Vertical text positioning</div>
                <div class="settings-item-description">Change where the popup is positioned relative to vertical text.</div>
            </div>
            <div class="settings-item-right">
                <select data-setting="general.popupVerticalTextPosition">
                    <option value="default">Same as horizontal text</option>
                    <option value="before">Before reading direction</option>
                    <option value="after">After reading direction</option>
                    <option value="left">Left of text</option>
                    <option value="right">Right of text</option>
                </select>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Horizontal text offset</div>
                <div class="settings-item-description">Change the distance the popup is placed relative to horizontal text.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">x</div>
                        <input type="number" class="short-width short-height" data-setting="general.popupHorizontalOffset">
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">y</div>
                        <input type="number" class="short-width short-height" data-setting="general.popupVerticalOffset">
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Vertical text offset</div>
                <div class="settings-item-description">Change the distance the popup is placed relative to vertical text.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">x</div>
                        <input type="number" class="short-width short-height" data-setting="general.popupHorizontalOffset2">
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">y</div>
                        <input type="number" class="short-width short-height" data-setting="general.popupVerticalOffset2">
                    </div>
                </div>
            </div>
        </div></div>
    </div>

    <!-- Search Window -->
    <div class="heading-container advanced-only">
        <div class="heading-container-icon"><span class="icon" data-icon="window"></span></div>
        <div class="heading-container-left"><h2 id="window"><a href="#window">Search Window</a></h2></div>
        <div class="heading-container-right"><a tabindex="0" class="heading-link-light" id="test-window-open-link">Open&hellip;</a></div>
    </div>
    <div class="settings-group advanced-only">
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Sticky search header</div>
                    <div class="settings-item-description">Search header stays on the page when scrolling down.</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.stickySearchHeader"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Use a native browser window instead of an embedded popup
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.usePopupWindow"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Instead of showing definitions in a popup embedded into the webpage,
                    a native browser window containing the popup content will be opened instead.
                    This window will be shared across all tabs.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Size</div>
                <div class="settings-item-description">Control the size of the window, in pixels.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Width</div>
                        <input type="number" class="short-width short-height" min="0" step="1" data-setting="popupWindow.width">
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Height</div>
                        <input type="number" class="short-width short-height" min="0" step="1" data-setting="popupWindow.height">
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Left position</div>
                <div class="settings-item-description">Control the left position of the window, in pixels.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item" id="popup-window-left-container" hidden>
                        <div class="settings-item-group-item-label">x</div>
                        <input type="number" class="short-width short-height" step="1" data-setting="popupWindow.left">
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Mode</div>
                        <select class="short-width short-height" data-setting="popupWindow.useLeft"
                            data-transform='[
                                {
                                    "step": "pre",
                                    "type": "toBoolean"
                                },
                                {
                                    "type": "setVisibility",
                                    "selector": "#popup-window-left-container",
                                    "condition": {"op": "===", "value": true}
                                },
                                {
                                    "step": "post",
                                    "type": "toString"
                                }
                            ]'
                        >
                            <option value="false">Auto</option>
                            <option value="true">Manual</option>
                        </select>
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Top position</div>
                <div class="settings-item-description">Control the top position of the window, in pixels.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item" id="popup-window-top-container" hidden>
                        <div class="settings-item-group-item-label">y</div>
                        <input type="number" class="short-width short-height" step="1" data-setting="popupWindow.top">
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Mode</div>
                        <select class="short-width short-height" data-setting="popupWindow.useTop"
                            data-transform='[
                                {
                                    "step": "pre",
                                    "type": "toBoolean"
                                },
                                {
                                    "type": "setVisibility",
                                    "selector": "#popup-window-top-container",
                                    "condition": {"op": "===", "value": true}
                                },
                                {
                                    "step": "post",
                                    "type": "toString"
                                }
                            ]'
                        >
                            <option value="false">Auto</option>
                            <option value="true">Manual</option>
                        </select>
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Window style</div>
                <div class="settings-item-description">Change the appearance of the window.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Type</div>
                        <select class="short-width short-height" data-setting="popupWindow.windowType">
                            <option value="normal">Normal</option>
                            <option value="popup">Popup</option>
                        </select>
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">State</div>
                        <select class="short-width short-height" data-setting="popupWindow.windowState">
                            <option value="normal">Normal</option>
                            <option value="maximized">Maximized</option>
                            <option value="fullscreen">Fullscreen</option>
                        </select>
                    </div>
                </div>
            </div>
        </div></div>
    </div>

    <!-- Audio -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="speaker"></span></div>
        <div class="heading-container-left"><h2 id="audio"><a href="#audio">Audio</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Enable audio playback for terms</div>
                <div class="settings-item-description">Show a clickable speaker icon next to search results.</div>
                <div class="settings-item-description">
                    This option may send term, reading, and/or language outside of Yomitan to fetch audio<span data-show-for-browser="firefox firefox-mobile"> (<a href="https://addons.mozilla.org/en-US/firefox/addon/yomitan/privacy/">Privacy Policy</a>)</span>.
                </div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="audio.enabled"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Auto-play search result audio</div>
                <div class="settings-item-description">The audio for the first result will be played automatically.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="audio.autoPlay"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Audio fallback sound</div>
                    <div class="settings-item-description">
                        The sound to play when Yomitan fails to fetch audio.
                    </div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="audio.fallbackSoundType">
                        <option value="none">None</option>
                        <option value="click">Click</option>
                        <option value="bloop">Bloop</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Audio volume</div>
                <div class="settings-item-description">Adjust the volume audio is played at, in percent.</div>
            </div>
            <div class="settings-item-right">
                <input type="number" data-setting="audio.volume" min="0" max="100">
            </div>
        </div></div>
        <div class="settings-item settings-item-button" data-modal-action="show,audio-sources"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure audio playback sources&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
    </div>

    <!-- Text Parsing -->
    <div>
        <div class="heading-container">
            <div class="heading-container-icon"><span class="icon" data-icon="text-parsing"></span></div>
            <div class="heading-container-left"><h2 id="text-parsing"><a href="#text-parsing">Text Parsing</a></h2></div>
            <div class="heading-container-right"><a tabindex="0" class="more-toggle more-only heading-link-light" data-parent-distance="3">Info&hellip;</a></div>
        </div>
        <div class="heading-description more" hidden>
            <p>
                Yomitan is able to scan the sentence surrounding a term and parse individual words
                of the query on the <a href="/search.html" target="_blank" rel="noopener">search page</a>.
                This information can also be added to Anki cards to provide additional context.
            </p>
            <p>
                <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
            </p>
        </div>
    </div>
    <div class="settings-group">
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Parse sentences using Yomitan's internal parser</div>
                    <div class="settings-item-description">
                        Sentence words are parsed using Yomitan's dictionaries.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="parsing.enableScanningParser"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Yomitan's internal parser is a simple algorithm which can parse sentences using the installed dictionaries.
                    It works by repeatedly detecting the longest term at the start of the sentence and advancing until no text remains.
                    This provides decent results for the general case, but since grammatical structure is not taken into account,
                    it can sometimes yield incorrect segmentation.
                </p>
                <p class="margin-above">
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only jp-only" data-hide-for-browser="firefox-mobile">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-invalid-indicator"></div>
                    <div class="settings-item-label">
                        Parse sentences using <a href="https://en.wikipedia.org/wiki/MeCab" target="_blank" rel="noopener noreferrer">MeCab</a>
                    </div>
                    <div class="settings-item-description">Sentence words are parsed using a third-party program. Japanese only.</div>
                    <div class="settings-item-description">
                        This option may send search query data outside of Yomitan for parsing<span data-show-for-browser="firefox firefox-mobile"> (<a href="https://addons.mozilla.org/en-US/firefox/addon/yomitan/privacy/">Privacy Policy</a>)</span>.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" class="permissions-toggle" data-permissions-setting="parsing.enableMecabParser" data-required-permissions="nativeMessaging"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    MeCab is a third-party program which uses its own dictionaries and parsing algorithm to decompose sentences into individual words.
                    MeCab may provide more accurate parsing results than Yomitan's internal parser.
                </p>
                <p>
                    In order for Yomitan to use it, both MeCab and a native messaging component must be installed.
                    A setup guide can be found <a href="https://github.com/yomidevs/yomitan-mecab-installer/blob/master/README.md" target="_blank" rel="noopener noreferrer">here</a>.
                </p>
                <div class="margin-above flex-row-nowrap">
                    <button type="button" id="test-mecab-button">Test</button>
                    <div id="test-mecab-results" class="flex-margin-left" hidden></div>
                </div>
                <p class="margin-above">
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Show space between parsed words</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="parsing.termSpacing"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Sentence scanning extent</div>
                <div class="settings-item-description">Adjust how many characters are bidirectionally scanned to form a sentence.</div>
            </div>
            <div class="settings-item-right">
                <input type="number" data-setting="sentenceParsing.scanExtent" min="0" step="1">
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Sentence termination characters</div>
            </div>
            <div class="settings-item-right">
                <div class="horizontal-flex horizontal-flex-nowrap">
                    <button type="button" class="low-emphasis" data-modal-action="show,sentence-termination-characters" id="configure-sentence-termination-characters-button" hidden>Configure&hellip;</button>
                    <select data-setting="sentenceParsing.terminationCharacterMode"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#configure-sentence-termination-characters-button",
                            "condition": {
                                "op": "||",
                                "value": [
                                    {"op": "===", "value": "custom"},
                                    {"op": "===", "value": "custom-no-newlines"}
                                ]
                            }
                        }'
                    >
                        <option value="custom">Custom</option>
                        <option value="custom-no-newlines">Custom, no newlines</option>
                        <option value="newlines">Newlines only</option>
                        <option value="none">None</option>
                    </select>
                </div>
            </div>
        </div></div>
    </div>

    <!-- Translation -->
    <div class="advanced-only">
        <div class="heading-container">
            <div class="heading-container-icon"><span class="icon" data-icon="translation"></span></div>
            <div class="heading-container-left"><h2 id="translation"><a href="#translation">Translation</a></h2></div>
        </div>
    </div>
    <div class="settings-group advanced-only">
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Dictionary search resolution</div>
                <div class="settings-item-description" lang="en"><p>"A dog"&#x3000;&rarr;&#x3000;search for "A dog","A do", "A d", "A"</p> or <p>"A dog"&#x3000;&rarr;&#x3000;"A dog", "A"</p></div>
            </div>
            <div class="settings-item-right">
                <select data-setting="translation.searchResolution">
                    <option value="letter">Letter</option>
                    <option value="word">Word</option>
                </select>
            </div>
        </div></div>
        <div class="settings-item settings-item-button" data-modal-action="show,translation-text-replacement-patterns"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure custom text replacement patterns&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
    </div>

    <!-- Anki -->
    <div>
        <div class="heading-container">
            <div class="heading-container-icon"><span class="icon" data-icon="note-card"></span></div>
            <div class="heading-container-left"><h2 id="anki"><a href="#anki">Anki</a></h2></div>
            <div class="heading-container-right"><a tabindex="0" class="more-toggle more-only heading-link-light" data-parent-distance="3">Info&hellip;</a></div>
        </div>
        <div class="heading-description more" hidden>
            <p>
                Yomitan supports automatic flashcard creation for <a href="https://apps.ankiweb.net/" target="_blank" rel="noopener noreferrer">Anki</a>,
                a free application designed to assist in remembering information.
                This feature requires installation of the <a href="https://foosoft.net/projects/anki-connect/" target="_blank" rel="noopener noreferrer">AnkiConnect</a> plugin.
                <br>
                See the <a href="https://yomitan.wiki/anki/" target="_blank" rel="noopener noreferrer">Yomitan wiki</a> for a setup guide.
            </p>
            <p>
                <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
            </p>
        </div>
    </div>
    <div class="settings-group">
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Enable Anki integration</div>
                    <div class="settings-item-description">
                        <span>Connection status:</span>
                        <span id="anki-error-message">&hellip;</span> <a tabindex="0" id="anki-error-message-details-toggle" hidden>Details&hellip;</a>
                        <div class="settings-item-description">
                            This option may send limited information about the current webpage, information contained in Yomitan dictionary entries, and/or relevant user settings outside of Yomitan to Anki<span data-show-for-browser="firefox firefox-mobile"> (<a href="https://addons.mozilla.org/en-US/firefox/addon/yomitan/privacy/">Privacy Policy</a>)</span>.
                        </div>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="anki.enable"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children" id="anki-error-message-details-container" hidden>
                <p>
                    <a tabindex="0" id="anki-error-log">Log error to console</a>
                </p>
                <p class="danger-text" id="anki-error-invalid-response-info" hidden>
                    Attempting to connect to Anki can sometimes return an error message which includes "Invalid response",
                    which may indicate that the value of the <em>AnkiConnect server address</em> option is incorrect.
                    Resetting it to the default value may fix issues that are occurring.
                </p>
                <div class="danger-text" id="anki-error-message-details"></div>
            </div>
            <div class="settings-item-children" data-show-for-os="mac">
                <p class="warning-text">
                    <strong>Notice for macOS users:</strong>
                    If Yomitan has issues connecting to AnkiConnect, it may be necessary to adjust some system settings.
                    See <a href="https://foosoft.net/projects/anki-connect/#notes-for-mac-os-x-users" target="_blank" rel="noopener noreferrer">this link</a> for details.
                </p>
            </div>
        </div>
        <div class="settings-item">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">AnkiConnect server address</div>
                    <div class="settings-item-description">
                        Change the URL of the AnkiConnect server.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <input type="text" placeholder="http://127.0.0.1:8765" spellcheck="false" autocomplete="off" data-setting="anki.server">
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    The default address for a server on the same device is <a href="http://127.0.0.1:8765" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8765</a>.
                    If Anki is running and AnkiConnect is installed, clicking this URL should open a page showing the current version of AnkiConnect.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Card tags</div>
                <div class="settings-item-description">List of space or comma separated tags to add to the card.</div>
            </div>
            <div class="settings-item-right">
                <input type="text" spellcheck="false" autocomplete="off" data-setting="anki.tags"
                    data-transform='[
                        {"type": "splitTags", "step": "pre"},
                        {"type": "joinTags", "step": "post"}
                    ]'
                >
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">API key</div>
                <div class="settings-item-description">Pass a secret value to AnkiConnect API calls.</div>
            </div>
            <div class="settings-item-right">
                <input type="password" placeholder="Disabled" spellcheck="false" autocomplete="off" data-setting="anki.apiKey" id="anki-api-key-input">
            </div>
        </div></div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Check for card duplicates</div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="anki.checkForDuplicates"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#anki-card-duplicate-options",
                            "condition": {"op": "===", "value": true}
                        }'
                    ><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children settings-item-children-group" id="anki-card-duplicate-options" hidden>
                <div class="settings-item">
                    <div class="settings-item-inner">
                        <div class="settings-item-left">
                            <div class="settings-item-label">
                                Check for duplicates across all models
                                <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                            </div>
                        </div>
                        <div class="settings-item-right">
                            <label class="toggle"><input type="checkbox" data-setting="anki.duplicateScopeCheckAllModels"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                        </div>
                    </div>
                    <div class="settings-item-children more" hidden>
                        <p>
                            By default, duplicate checks are only performed for notes created with the same model.
                            Enabling this option will check for duplicates across <em>all</em> model types.
                        </p>
                        <p>
                            <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                        </p>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-item-inner settings-item-inner-wrappable">
                        <div class="settings-item-left">
                            <div class="settings-item-label">
                                Duplicate card scope
                                <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                            </div>
                        </div>
                        <div class="settings-item-right">
                            <select data-setting="anki.duplicateScope">
                                <option value="collection">Collection</option>
                                <option value="deck">Deck</option>
                                <option value="deck-root">Deck root</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-item-children more" hidden>
                        <p>
                            A card is considered a duplicate if the value of the first field matches that of any other card.
                            By default, this check will include cards across all decks in a collection, but this constraint can be relaxed
                            by using either the <em>Deck</em> or <em>Deck root</em> option.
                        </p>
                        <p>
                            The <em>Deck</em> option will only check for duplicates in the target deck.
                            The <em>Deck root</em> option will additionally check for duplicates in all child decks of the root deck.
                            This allows adding cards that are unique for decks including a subdeck structure.
                            For decks which don't have any parent-child hierarchy, both options function the same.
                        </p>
                        <p>
                            <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                        </p>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-item-inner settings-item-inner-wrappable">
                        <div class="settings-item-left">
                            <div class="settings-item-label">
                                When a duplicate is detected
                                <a tabindex="0" class="more-toggle more-only warning-text" id="anki-overwrite-warning" data-parent-distance="4">(?)</a>
                            </div>
                        </div>
                        <div class="settings-item-right">
                            <select data-setting="anki.duplicateBehavior">
                                <option value="prevent">Prevent adding</option>
                                <option value="overwrite">Allow overwriting</option>
                                <option value="new">Allow adding</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-item-children more" hidden>
                        <ul class="warning-text">
                            <li class="danger-text">Overwriting a card can result in the loss of data.</li>
                            <li>Duplicate cards of a different note type cannot be overwritten.</li>
                            <li>If there are multiple duplicate cards, the first card found will be overwritten.</li>
                            <li>You can customize overwriting for each field in the <code>Configure Anki card format&hellip;</code> menu.</li>
                        </ul>
                        <p>
                            <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Screenshot format</div>
                <div class="settings-item-description">Adjust the format and quality of screenshots created for cards.</div>
            </div>
            <div class="settings-item-right">
                <div class="settings-item-group">
                    <div class="settings-item-group-item" id="anki-screenshot-quality" hidden>
                        <div class="settings-item-group-item-label">Quality (%)</div>
                        <input type="number" class="short-width short-height" data-setting="anki.screenshot.quality" min="0" max="100" step="1">
                    </div>
                    <div class="settings-item-group-item">
                        <div class="settings-item-group-item-label">Format</div>
                        <select class="short-width short-height" data-setting="anki.screenshot.format"
                            data-transform='{
                                "type": "setVisibility",
                                "selector": "#anki-screenshot-quality",
                                "condition": {"op": "===", "value": "jpeg"}
                            }'
                        >
                            <option value="png">PNG</option>
                            <option value="jpeg">JPEG</option>
                        </select>
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner settings-item-inner-wrappable">
                <div class="settings-item-left">
                    <div class="settings-item-label">Idle download timeout <span class="light">(in milliseconds)</span></div>
                    <div class="settings-item-description">
                        The maximum time before an idle download will be cancelled; 0 = no limit.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <input type="number" data-setting="anki.downloadTimeout" min="0">
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Audio files can be downloaded from remote servers when creating Anki cards,
                    and sometimes these downloads can stall due to server or internet connectivity issues.
                    When this setting has a non-zero value, if a download has stalled for longer than the time specified,
                    the download will be cancelled.
                </p>
                <p class="margin-above">
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Suspend new cards</div>
                <div class="settings-item-description">New cards will be suspended when a note is added.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="anki.suspendNewCards"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">Note viewer window</div>
                    <div class="settings-item-description">
                        Clicking the <em>View added note</em> button shows this window.
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">More&hellip;</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="anki.noteGuiMode">
                        <option value="browse">Card browser</option>
                        <option value="edit">Note editor</option>
                    </select>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    AnkiConnect releases after around 2022-05-29 support a new note editor window
                    which can be shown when clicking the <em>View added note</em> button.
                    This can be tested using the buttons below.
                    If an error occurs, Anki and/or AnkiConnect may need to be updated.
                </p>
                <div class="test-anki-note-viewer-container">
                    <button type="button" class="test-anki-note-viewer-button" data-mode="browse">Test <em>Card browser</em></button>
                    <button type="button" class="test-anki-note-viewer-button" data-mode="edit">Test <em>Note editor</em></button>
                    <div class="test-anki-note-viewer-results" id="test-anki-note-viewer-results" hidden></div>
                </div>
                <p class="margin-above">
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Show card tags and flags
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <select data-setting="anki.displayTagsAndFlags"
                        data-transform='{
                            "type": "setVisibility",
                            "selector": "#anki-target-tags-option",
                            "condition": {"op": "===", "value": "custom"}
                        }'
                    >
                        <option value="never">Never</option>
                        <option value="always">Always</option>
                        <option value="non-standard">Non-standard</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    When coming across a word that is already in an Anki deck, two buttons can appear that show
                    the tags and flags the card has. If set to <em>Non-standard</em>, all tags that are included in the
                    <em>Card tags</em> option will be filtered out from the list. If set to <em>Custom</em>, only tags that are included in the
                    <em>Target tags</em> option will be shown. If no tags remain after filtering,
                    then the tags button will not be shown. If no flags are found, the flags button will not be shown.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Force Anki sync on adding card</div>
                <div class="settings-item-description">
                        May cause issues when using in conjuction with Ankiconnect Android, and/or slow or metered connections.
                    </div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" data-setting="anki.forceSync"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only" id="anki-target-tags-option" hidden><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Target tags</div>
                <div class="settings-item-description">List of space or comma separated tags.</div>
            </div>
            <div class="settings-item-right">
                <input type="text" spellcheck="false" autocomplete="off" data-setting="anki.targetTags"
                    data-transform='[
                        {"type": "splitTags", "step": "pre"},
                        {"type": "joinTags", "step": "post"}
                    ]'
                >
            </div>
        </div></div>
        <div class="settings-item settings-item-button" data-modal-action="show,anki-cards"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure Anki flashcards&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
        <div class="settings-item settings-item-button advanced-only" data-modal-action="show,anki-card-templates"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Customize handlebars templates&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
        <div class="settings-item settings-item-button advanced-only" data-modal-action="show,generate-anki-notes" id="generate-anki-notes-main-settings-entry"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Generate notes (experimental)&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
    </div>

    <!-- Clipboard -->
    <div>
        <div class="heading-container">
            <div class="heading-container-icon"><span class="icon" data-icon="clipboard"></span></div>
            <div class="heading-container-left"><h2 id="clipboard"><a href="#clipboard">Clipboard</a></h2></div>
            <div class="heading-container-right"><a tabindex="0" class="more-toggle more-only heading-link-light" data-parent-distance="3">Info&hellip;</a></div>
        </div>
        <div class="heading-description more" hidden>
            <p>
                Yomitan can watch the system clipboard and automatically search on the search page when text is copied.
                This can be useful for using Yomitan to scan text from external applications.
            </p>
            <p>
                This feature requires Yomitan to have clipboard reading permissions, and when this option is enabled,
                the clipboard will be frequently checked for new text.
            </p>
            <p>
                <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
            </p>
        </div>
    </div>
    <div class="settings-group">
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-invalid-indicator"></div>
                <div class="settings-item-label">Enable background clipboard text monitoring</div>
                <div class="settings-item-description">Open the search page in a new window when text is copied to the clipboard.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" class="permissions-toggle" data-permissions-setting="clipboard.enableBackgroundMonitor" data-required-permissions="clipboardRead"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-invalid-indicator"></div>
                <div class="settings-item-label">Enable search page clipboard text monitoring</div>
                <div class="settings-item-description">The query on the search page will be automatically updated with text in the clipboard.</div>
            </div>
            <div class="settings-item-right">
                <label class="toggle"><input type="checkbox" class="permissions-toggle" data-permissions-setting="clipboard.enableSearchPageMonitor" data-required-permissions="clipboardRead"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
            </div>
        </div></div>
        <div class="settings-item advanced-only"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Maximum clipboard text search length</div>
                <div class="settings-item-description">Limit the number of characters used when searching clipboard text.</div>
            </div>
            <div class="settings-item-right">
                <input type="number" min="0" step="1" data-setting="clipboard.maximumSearchLength">
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner settings-item-inner-wrappable">
            <div class="settings-item-left">
                <div class="settings-item-label">Clipboard text search mode</div>
                <div class="settings-item-description">Change how the search page reacts to new text in the clipboard.</div>
            </div>
            <div class="settings-item-right">
                <select data-setting="clipboard.autoSearchContent"
                    data-transform='[
                        {
                            "step": "pre",
                            "type": "toBoolean"
                        },
                        {
                            "step": "post",
                            "type": "toString"
                        }
                    ]'
                >
                    <option value="true">Search for definitions</option>
                    <option value="false">Update query only</option>
                </select>
            </div>
        </div></div>
    </div>

    <!-- Shortcuts -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="keyboard"></span></div>
        <div class="heading-container-left"><h2 id="shortcuts"><a href="#shortcuts">Shortcuts</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">
                    <p>
                        Yomitan has two categories of keyboard shortcuts:
                    </p>
                    <ul>
                        <li>
                            <strong>Standard</strong> keyboard shortcuts are controlled by the extension, and can be added, removed,
                            and configured to work on webpages that Yomitan functions on.
                        </li>
                        <li>
                            <strong>Native</strong> keyboard shortcuts are controlled by the web browser, and function globally
                            within the web browser<span data-show-for-browser="chrome edge"> or system-wide</span>.
                        </li>
                    </ul>
                </div>
            </div>
        </div></div>
        <div class="settings-item settings-item-button" data-modal-action="show,keyboard-shortcuts"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure standard keyboard shortcuts&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
        <div class="settings-item settings-item-button" data-modal-action="show,extension-keyboard-shortcuts"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure native keyboard shortcuts&hellip;</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></div>
    </div>

    <!-- Backup -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="backup"></span></div>
        <div class="heading-container-left"><h2 id="backup"><a href="#backup">Backup</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">
                    Yomitan can import and export settings files which can be
                    used to restore settings, share settings across devices,
                    and to help to debug problems. These files will only
                    contain settings and will not contain dictionaries.
                    Dictionaries must be imported separately. However, you can
                    also import a previously exported collection of
                    dictionaries. See the next section about that.
                </div>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-right settings-item-button-group-container">
                <div class="settings-item-button-group">
                    <div class="settings-item-button-group-item">
                        <button type="button" class="low-emphasis" id="settings-import-button">Import Settings</button>
                        <div hidden><input type="file" id="settings-import-file" accept=".json,application/json"></div>
                    </div>
                    <div class="settings-item-button-group-item">
                        <button type="button" class="low-emphasis" id="settings-export-button">Export Settings</button>
                    </div>
                    <div class="settings-item-button-group-item">
                        <button type="button" class="low-emphasis danger" id="settings-reset-button">Reset Settings</button>
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">
                    You can try to export the entire collection of your
                    dictionaries into a single large file that you can try to
                    import from other browsers or devices. Importing the
                    collection like that is a destructive operation and will
                    replace your current database of dictionaries so please
                    proceed with caution. These operations can take a lot of
                    time depending on the size of your database, especially to
                    start and to complete, so have patience.

                    <br><br>

                    See <a href="https://github.com/yomidevs/yomichan-data-exporter" target="_blank" rel="noopener noreferrer">yomichan-data-exporter</a> for
                    instructions to export your data from older Yomichan installations.
                </div>
            </div>
        </div></div>
        <div class="settings-item"><div class="settings-item-inner">
            <div class="settings-item-right settings-item-button-group-container">
                <div class="settings-item-button-group">
                    <div class="settings-item-button-group-item">
                        <button type="button" class="low-emphasis" id="settings-import-db-button">Import Dictionary Collection</button>
                        <div hidden><input type="file" id="settings-import-db" accept=".json,application/json"></div>
                    </div>
                    <div class="settings-item-button-group-item">
                        <button type="button" class="low-emphasis" id="settings-export-db-button">Export Dictionary Collection</button>
                    </div>
                </div>
            </div>
        </div></div>
        <div class="settings-item" id="db-ops-progress-report-container"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-progress-report" id="db-ops-progress-report">
                    Placeholder text.
                </div>
            </div>
        </div></div>
        <div class="settings-item" id="db-ops-error-report-container"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-error-report" id="db-ops-error-report">
                    Placeholder text.
                </div>
            </div>
        </div></div>
    </div>

    <!-- Accessibility -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="accessibility"></span></div>
        <div class="heading-container-left"><h2 id="accessibility"><a href="#accessibility">Accessibility</a></h2></div>
    </div>
    <div class="settings-group">
        <div class="settings-item">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Enable Google Docs compatibility mode
                        <a tabindex="0" class="more-toggle more-only danger-text" data-parent-distance="4">(?)</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="accessibility.forceGoogleDocsHtmlRendering"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    Google Docs now uses
                    <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas" target="_blank" rel="noopener noreferrer">canvas-based</a>
                    rendering to display content<sup><a href="https://workspaceupdates.googleblog.com/2021/05/Google-Docs-Canvas-Based-Rendering-Update.html" target="_blank" rel="noopener noreferrer">[2]</a></sup>
                    which prevents Yomitan from being able to scan text using the standard methods.
                    Enabling this option will force Google Docs webpages to expose some additional text
                    information which should allow Yomitan to still work.
                </p>
                <p class="warning-text">
                    If any profile has this setting enabled, compatibility mode will be activated;
                    profile conditions are ignored.
                </p>
                <p class="danger-text">
                    Google has changed this compatibility implementation several times, and the changes do not seem to be announced or documented.
                    Therefore, it is possible that this feature could stop working at any time the future without warning.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Security -->
    <div class="heading-container">
        <div class="heading-container-icon"><span class="icon" data-icon="lock"></span></div>
        <div class="heading-container-left"><h2 id="security"><a href="#security">Security</a></h2></div>
    </div>
    <div class="settings-group">
        <a href="/permissions.html" rel="noopener" class="settings-item settings-item-button"><div class="settings-item-inner">
            <div class="settings-item-left">
                <div class="settings-item-label">Configure Yomitan Permissions</div>
            </div>
            <div class="settings-item-right open-panel-button-container">
                <button type="button" class="icon-button"><span class="icon-button-inner"><span class="icon" data-icon="material-right-arrow"></span></span></button>
            </div>
        </div></a>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Use a secure container around popups
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.usePopupShadowDom"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    On <a href="https://caniuse.com/shadowdomv1" target="_blank" rel="noopener noreferrer">supported browsers</a>,
                    a popup's <code>iframe</code> element will be embeded inside of a container with a closed <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" rel="noopener noreferrer">shadow DOM</a>.
                    This container prevents scripts running on the underlying web page from being able to discover the <code>iframe</code>,
                    which helps avoid situations where the web page might try to modify or use the Yomitan popup for an unintended purpose.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
        <div class="settings-item advanced-only">
            <div class="settings-item-inner">
                <div class="settings-item-left">
                    <div class="settings-item-label">
                        Use secure popup frame URL
                        <a tabindex="0" class="more-toggle more-only" data-parent-distance="4">(?)</a>
                    </div>
                </div>
                <div class="settings-item-right">
                    <label class="toggle"><input type="checkbox" data-setting="general.useSecurePopupFrameUrl"><span class="toggle-body"><span class="toggle-track"></span><span class="toggle-knob"></span></span></label>
                </div>
            </div>
            <div class="settings-item-children more" hidden>
                <p>
                    When this option is enabled, the URL of the <code>iframe</code> element will be assigned by
                    directly changing the location of the <code>iframe</code>'s internal document, rather than using
                    the <code>iframe</code>'s <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-src" target="_blank" rel="noopener noreferrer"><code>src</code></a>
                    attribute. This results in the extension URL not being exposed to the underling web page, and thus making it harder
                    to detect the presence of Yomitan.
                </p>
                <p>
                    <a tabindex="0" class="more-toggle" data-parent-distance="3">Less&hellip;</a>
                </p>
            </div>
        </div>
    </div>

    <div class="footer-padding"></div>

</div>
<div class="content-right">
    <div class="preview-sidebar"><div class="preview-sidebar-inner">
        <div class="preview-frame-container">
            <iframe class="preview-frame" id="popup-preview-frame"></iframe>
        </div>
    </div></div>
</div>
</div></div>


<!-- Auxiliary content -->
<div class="content-dimmer"></div>

<div class="fab-container">
    <div class="fab-container-left"></div>
    <div class="fab-container-center"></div>
    <div class="fab-container-right">
        <div class="fab-container-right-inner1"><div class="fab-container-right-inner2">
            <div class="fab-container-item fab-container-item-popup-preview">
                <button type="button" class="fab-button icon-button" data-action="toggle-preview-sidebar"><span class="icon-button-inner"><span class="fab-button-background"></span><span class="icon" data-icon="popup"></span></span></button>
            </div>
            <div class="fab-container-item">
                <button type="button" class="fab-button icon-button" data-action="toggle-sidebar"><span class="icon-button-inner"><span class="fab-button-background"></span><span class="icon" data-icon="hamburger-menu"></span></span></button>
            </div>
        </div></div>
    </div>
</div>

<div class="status-footer-container" hidden><div class="status-footer-container2">
    <div class="status-footer">
        <div class="status-footer-header"><div class="status-footer-header-label">Tasks in progress:</div><a tabindex="0" class="status-footer-header-close">Close</a></div>
        <div class="status-footer-item dictionary-delete-progress" hidden>
            <div class="progress-labels"><div class="progress-info"></div><div class="progress-status"></div></div>
            <div class="progress-bar-track"><div class="progress-bar danger"></div></div>
        </div>
        <div class="status-footer-item dictionary-import-progress" hidden>
            <div class="progress-labels"><div class="progress-info"></div><div class="progress-status"></div></div>
            <div class="progress-bar-track"><div class="progress-bar"></div></div>
        </div>
    </div>
</div></div>

<div id="popup-menus"></div>

</body>
</html>
